# Upgrading to Version 4.0.0

## Overview

Version 4.0.0 introduces significant changes to the configuration system and file structure. This guide will help you migrate from older versions.

## Key Changes

- Configuration file format and location have changed
- Database schema updates
- New theming system
- Updated permission system

## Migrating from Legacy Configuration

If you're upgrading from an older version of Poweradmin (pre-4.0.0), you need to migrate your legacy configuration:

```bash
php scripts/migrate-config.php
```

This will convert your old `inc/config.inc.php` settings to the new `config/settings.php` format.

## Configuration Changes

### Old Configuration Location
`inc/config.inc.php`

### New Configuration Location
`config/settings.php`

### Configuration Format

The configuration format has changed from direct variable assignments to a structured array format:

#### Old Format (pre-4.0.0)
```php
$db_host = 'localhost';
$db_user = 'poweradmin';
$db_pass = 'password';
$db_name = 'powerdns';
$db_type = 'mysql';
```

#### New Format (4.0.0+)
```php
return [
    'database' => [
        'host' => 'localhost',
        'user' => 'poweradmin',
        'password' => 'password',
        'name' => 'powerdns',
        'type' => 'mysql',
    ],
];
```

## Manual Migration Steps

If the automatic migration script doesn't work for your setup, follow these steps:

1. Create a new `config/settings.php` file
2. Refer to `config/settings.defaults.php` for available options
3. Map your old settings to the new format
4. Test the configuration

## Post-Upgrade Tasks

1. Update database structure if necessary
2. Check for any new required settings
3. Test functionality thoroughly
4. Update custom scripts that might reference the old configuration format
