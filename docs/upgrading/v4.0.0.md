# Upgrading to Version 4.0.0

## Overview

Version 4.0.0 introduces significant changes to the configuration system and file structure. This guide will help you migrate from older versions.

## Key Changes

- Configuration file format and location have changed
- Database schema updates
- New theming system
- Updated permission system
- Customizable DNS record types

## Migrating from Legacy Configuration

If you're upgrading from an older version of Poweradmin (pre-4.0.0), you need to migrate your legacy configuration:

```bash
php scripts/migrate-config.php
```

This will convert your old `inc/config.inc.php` settings to the new `config/settings.php` format.

## Configuration Changes

### Old Configuration Location
`inc/config.inc.php`

### New Configuration Location
`config/settings.php`

### Configuration Format

The configuration format has changed from direct variable assignments to a structured array format:

#### Old Format (pre-4.0.0)
```php
$db_host = 'localhost';
$db_user = 'poweradmin';
$db_pass = 'password';
$db_name = 'powerdns';
$db_type = 'mysql';
```

#### New Format (4.0.0+)
```php
return [
    'database' => [
        'host' => 'localhost',
        'user' => 'poweradmin',
        'password' => 'password',
        'name' => 'powerdns',
        'type' => 'mysql',
    ],
];
```

## Manual Migration Steps

If the automatic migration script doesn't work for your setup, follow these steps:

1. Create a new `config/settings.php` file
2. Refer to `config/settings.defaults.php` for available options
3. Map your old settings to the new format
4. Test the configuration

## Post-Upgrade Tasks

1. Update database structure if necessary
2. Check for any new required settings
3. Test functionality thoroughly
4. Update custom scripts that might reference the old configuration format

## New Feature: DNS Record Type Customization

Version 4.0.0 introduces the ability to customize which DNS record types are available in the interface. This feature helps simplify the user interface by showing only the record types that are relevant to your specific DNS needs.

To configure this feature, add the following to your `config/settings.php` file:

```php
'dns' => [
    // Other DNS settings...
    
    // Record Type Settings
    'domain_record_types' => ['A', 'AAAA', 'CNAME', 'MX', 'NS', 'SOA', 'TXT'], // For forward zones
    'reverse_record_types' => ['PTR', 'NS', 'SOA'],                            // For reverse zones
]
```

For full documentation on this feature, see [Record Type Customization](../configuration/record-types.md).
